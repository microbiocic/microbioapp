import{c as G}from"./chunk-YVY5OJQN.js";import{g as Y}from"./chunk-3KEKTGMK.js";import{a as X}from"./chunk-DI536W4F.js";import{a as j,b as B,c as z,d as $,e as H,f as J,g as K,k as Q,l as U,m as W}from"./chunk-HAB6W6VK.js";import"./chunk-FBGW7GLQ.js";import"./chunk-4PBOS6ET.js";import{m as w}from"./chunk-P3J2DO34.js";import{$ as N,$a as F,Aa as n,Ba as D,Ka as g,Na as s,Pa as O,R as q,Ra as p,Sa as I,Ta as E,Ua as k,Va as r,W as T,Wa as a,Xa as l,Ya as L,_ as d,ab as m,bb as u,cb as x,db as f,e as C,gb as V,ia as R,ja as S,qa as v,ra as _}from"./chunk-6U5VWFB5.js";var b=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=N({type:o});static \u0275inj=q({imports:[w,X,W]})};function et(o,t){if(o&1&&l(0,"i"),o&2){let e=m();O(e.inputControl().icon)}}function ot(o,t){if(o&1&&(r(0,"p"),u(1),a()),o&2){let e=m(2);n(),f("",e.inputControl().name," es requerido.")}}function it(o,t){if(o&1&&(r(0,"p"),u(1),a()),o&2){let e=m(2);n(),f("Ingrese un ",e.inputControl().name," v\xE1lido.")}}function nt(o,t){if(o&1&&(r(0,"div",5),g(1,ot,2,1,"p")(2,it,2,1,"p"),a()),o&2){let e=m();n(),p(e.inputControl().control.hasError("required")?1:-1),n(),p(e.inputControl().control.hasError("email")?2:-1)}}var y=class o{inputControl=_.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["shared-input"]],inputs:{inputControl:[1,"inputControl"]},decls:7,vars:8,consts:[[1,"field","column"],[3,"for"],[1,"input-wrapper"],[3,"class"],[3,"id","type","formControl","required"],[1,"validators","columns","g-1","wd-100"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"label",1),u(2),a(),r(3,"span",2),g(4,et,1,2,"i",3),l(5,"input",4),a(),g(6,nt,3,2,"div",5),a()),e&2&&(n(),s("for",i.inputControl().id),n(),f("",i.inputControl().name,":"),n(2),p(i.inputControl().icon!==null&&i.inputControl().icon!==void 0?4:-1),n(),s("id",i.inputControl().id)("type",i.inputControl().type)("formControl",i.inputControl().control)("required",i.inputControl().required),n(),p(i.inputControl().control.invalid&&i.inputControl().control.touched?6:-1))},dependencies:[j,z,Q,J],styles:[".field[_ngcontent-%COMP%]{width:100%;gap:.5rem;align-items:start}.input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;color:#003466}.input-wrapper[_ngcontent-%COMP%]:focus-within{color:#fff}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:30%;left:1rem;position:absolute}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem 1rem .5rem 4rem;border-radius:.5rem;font-size:2rem;border:.2rem solid #003466}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background:#003466;color:#fff}.validators[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f02121;text-align:center}"]})};function at(o,t){if(o&1&&l(0,"shared-input",1),o&2){let e=m();s("inputControl",e.getPasswordField())}}function st(o,t){if(o&1&&l(0,"shared-input",1)(1,"shared-input",1)(2,"shared-input",1),o&2){let e=m();s("inputControl",e.getFirstNameField()),n(),s("inputControl",e.getLastNameField()),n(),s("inputControl",e.getChargeField())}}var P=class o{constructor(t){this.fb=t;this.authForm=this.fb.group({email:["",B.email],password:[""],firstName:[""],lastName:[""],charge:[""]}),setTimeout(()=>{this.isFormValid=this.authForm.valid})}formType=_("login");buttonText=_.required();login=v();register=v();forgotPassword=v();authForm;isFormValid=!1;onSubmit(){if(this.authForm.invalid)return;let t=this.authForm.value;switch(this.formType()){case"login":this.login.emit({email:t.email,password:t.password});break;case"register":this.register.emit({email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,charge:t.charge});break;case"forgotPassword":this.forgotPassword.emit({email:t.email});break;default:console.error("Tipo de formulario no v\xE1lido")}}get email(){return this.authForm.get("email")}get password(){return this.authForm.get("password")}get firstName(){return this.authForm.get("firstName")}get lastName(){return this.authForm.get("lastName")}get charge(){return this.authForm.get("charge")}getEmailField(){let t=this.formType()!=="register";return{name:"Correo",type:"email",id:"email",control:this.email,icon:"fa-regular fa-envelope",required:t}}getPasswordField(){let t=this.formType()!=="forgotPassword";return{name:"Contrase\xF1a",type:"password",id:"password",control:this.password,icon:"fa-solid fa-lock",required:!1}}getFirstNameField(){let t=this.formType()==="register";return{name:"Nombre",type:"text",id:"name",control:this.firstName,icon:"fa-regular fa-user",required:!1}}getLastNameField(){let t=this.formType()==="register";return{name:"Apellido",type:"text",id:"lastName",control:this.lastName,icon:"fa-regular fa-user",required:!1}}getChargeField(){let t=this.formType()==="register";return{name:"Cargo",type:"text",id:"charge",control:this.charge,icon:"fa-regular fa-building",required:!1}}static \u0275fac=function(e){return new(e||o)(D(U))};static \u0275cmp=d({type:o,selectors:[["auth-form"]],inputs:{formType:[1,"formType"],buttonText:[1,"buttonText"]},outputs:{login:"login",register:"register",forgotPassword:"forgotPassword"},decls:6,vars:5,consts:[[1,"form","column","wd-100",3,"ngSubmit","formGroup"],[1,"form-field",3,"inputControl"],["type","submit",1,"form-button","btn","btn-primary"]],template:function(e,i){e&1&&(r(0,"form",0),F("ngSubmit",function(){return i.onSubmit()}),l(1,"shared-input",1),g(2,at,1,1,"shared-input",1)(3,st,3,3),r(4,"button",2),u(5),a()()),e&2&&(s("formGroup",i.authForm),n(),s("inputControl",i.getEmailField()),n(),p(i.formType()!=="forgotPassword"?2:-1),n(),p(i.formType()==="register"?3:-1),n(2),f(" ",i.buttonText()," "))},dependencies:[y,H,$,K],styles:[".form[_ngcontent-%COMP%]{gap:2rem}.form-field[_ngcontent-%COMP%]{width:80%}.form-button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;font-size:1.8rem}@media (min-width: 1024px){.form-button[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:2rem}}"]})};function lt(o,t){if(o&1){let e=L();r(0,"li",7),F("click",function(){let h=R(e).$implicit,c=m();return S(c.toggleAction(h.action))}),u(1),a()}if(o&2){let e=t.$implicit;n(),x(e.name)}}var M=class o{languageService=T(Y);translations=this.languageService.translations();token="";authActions=this.translations.auth.actions;authTitle=this.authActions[0].name;selectedAction=this.authActions[0].action;buttonText=this.authActions[0].button;authService=T(G);getCurrentActions(){return this.authActions.filter(t=>t.action!==this.selectedAction)}onLogin(t){return C(this,null,function*(){yield this.authService.login(t)})}onRegister(t){return C(this,null,function*(){yield this.authService.register(t)})}onForgotPassword(t){return C(this,null,function*(){yield console.log(this.authService.forgotPassword(t))})}onRecoveryPassword(t){return C(this,null,function*(){yield this.authService.recoveryPassword(t)})}toggleAction(t){this.selectedAction=t;let e=this.authActions.find(i=>i.action===t);this.authTitle=e?e.name:"",this.buttonText=e?e.button:""}onLogout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["auth-main"]],standalone:!0,features:[V],decls:9,vars:3,consts:[[1,"auth","column","g-2","bg-primary","wd-100"],[1,"auth-content","column","g-2","bg-white","p-2"],[1,"auth-title","color-primary"],["src","logo.svg","alt","corporative_logo",1,"auth-logo"],[1,"auth-form","column","g-1","wd-100",3,"login","register","forgotPassword","formType","buttonText"],[1,"auth-options","column","g-1"],[1,"auth-options_list","color-primary","pointer"],[1,"auth-options_list","color-primary","pointer",3,"click"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),u(3),a(),l(4,"img",3),r(5,"auth-form",4),F("login",function(c){return i.onLogin(c)})("register",function(c){return i.onRegister(c)})("forgotPassword",function(c){return i.onForgotPassword(c)}),a(),r(6,"ul",5),E(7,lt,2,1,"li",6,I),a()()()),e&2&&(n(3),x(i.authTitle),n(2),s("formType",i.selectedAction)("buttonText",i.buttonText),n(2),k(i.getCurrentActions()))},dependencies:[w,b,P],styles:[".auth[_ngcontent-%COMP%]{min-height:100vh}.auth-title[_ngcontent-%COMP%]{border-bottom:.5rem solid #f88d2b}.auth-logo[_ngcontent-%COMP%]{max-width:50%}.auth-content[_ngcontent-%COMP%]{width:100%;height:100vh}.auth-options_list[_ngcontent-%COMP%]:hover{font-weight:600}@media (min-width: 768px){.auth-content[_ngcontent-%COMP%]{height:fit-content;width:80%;border-radius:1rem}}@media (min-width: 1024px){.auth-logo[_ngcontent-%COMP%]{max-width:30%}.auth-form[_ngcontent-%COMP%]{width:80%}.auth-content[_ngcontent-%COMP%]{width:60%}}"]})};export{M as default};
