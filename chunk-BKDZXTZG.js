import{a as h,b as u}from"./chunk-PJZ2M27N.js";import{a as c,b as p}from"./chunk-4PBOS6ET.js";import{Ga as r,Q as l,W as o,e as n}from"./chunk-6U5VWFB5.js";var g=class i{apiUrl=h.apiUrl+"genes";http=o(p);genes=r([]);currentPage=r(1);pageSize=r(20);totalPages=r(10);totalRecords=r(0);hasPrevious=r(!1);hasNext=r(!0);alertsService=o(u);listGenes(e=this.currentPage(),t=this.pageSize()){let a=new c().set("pageNumber",e.toString()).set("pageSize",t.toString());this.http.get(this.apiUrl,{params:a}).subscribe({next:s=>{this.totalPages.set(s.totalPages),this.setGeneData(s)},error:s=>this.alertsService.error("Error loading genes: "+s)})}getGenes(){return this.genes()}getGeneById(e){return this.http.get(`${this.apiUrl}/${e}`)}getGeneByTaxonomy(e){e===""?this.listGenes():this.http.get(`${this.apiUrl}/search`,{params:{code:e}}).subscribe(t=>{this.setGeneData(t)})}setGeneData(e){e.items?(this.genes.set(e.items),this.totalRecords.set(e.totalCount),this.hasPrevious.set(e.currentPage>1),this.hasNext.set(e.currentPage<e.totalPages)):(this.genes.set([]),this.totalRecords.set(0),this.hasPrevious.set(!1),this.hasNext.set(!1))}createGene(e){this.http.post(this.apiUrl,e).subscribe({next:t=>{this.alertsService.successful("\xA1\xC9xito al crear el gen! C\xF3digo: "+t.code),this.listGenes()},error:t=>this.alertsService.error("Error al crear el gen: "+t)})}updateGene(e){this.http.put(`${this.apiUrl}/`,e).subscribe({next:t=>{this.alertsService.successful("El gen con c\xF3digo: "+t.code+" se edit\xF3 correctamente."),this.listGenes()},error:t=>this.alertsService.error("Error al editar el gen: "+t)})}deleteGene(e){return n(this,null,function*(){if(yield this.alertsService.confirm("\xBFEst\xE1s seguro de que deseas eliminar este registro?","S\xED, eliminar","Cancelar"))this.http.delete(`${this.apiUrl}/${e}`).subscribe({next:()=>{this.alertsService.successful("\xA1El registro ha sido eliminado correctamente!"),this.listGenes()},error:a=>this.alertsService.error("Error al eliminar el gen: "+a)});else{this.alertsService.alert("Operaci\xF3n cancelada");return}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
